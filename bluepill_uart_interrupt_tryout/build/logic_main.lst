ARM GAS  /tmp/ccuU1f3i.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"logic_main.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.blink_PC13,"ax",%progbits
  16              		.align	1
  17              		.global	blink_PC13
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	blink_PC13:
  24              	.LFB67:
  25              		.file 1 "Src/logic_main.c"
   1:Src/logic_main.c **** 
   2:Src/logic_main.c **** #include <string.h>
   3:Src/logic_main.c **** #include <stdlib.h>
   4:Src/logic_main.c **** #include <time.h>
   5:Src/logic_main.c **** 
   6:Src/logic_main.c **** #include "main.h"
   7:Src/logic_main.c **** #include "stm32f1xx_hal.h"
   8:Src/logic_main.c **** #include "usart.h"
   9:Src/logic_main.c **** #include "gpio.h"
  10:Src/logic_main.c **** #include "stm32f1xx_it.h"
  11:Src/logic_main.c **** 
  12:Src/logic_main.c **** 
  13:Src/logic_main.c **** int readUserInput(void);
  14:Src/logic_main.c **** void processUserInput(int8_t opt);
  15:Src/logic_main.c **** 
  16:Src/logic_main.c **** void blink_PC13(int pin_state);
  17:Src/logic_main.c **** 
  18:Src/logic_main.c **** int main(void);
  19:Src/logic_main.c **** 
  20:Src/logic_main.c **** int UartReady = 0;
  21:Src/logic_main.c **** int8_t opt =-1;
  22:Src/logic_main.c **** 
  23:Src/logic_main.c **** char test_send_message[1] = "0";
  24:Src/logic_main.c **** char test_receive_message[1];
  25:Src/logic_main.c **** char readBuf[1];
  26:Src/logic_main.c **** int receive_from_uart = -1;
  27:Src/logic_main.c **** 
  28:Src/logic_main.c **** // init_stm32_main_template
  29:Src/logic_main.c **** int main(void){
  30:Src/logic_main.c ****     HAL_Init();
  31:Src/logic_main.c **** 
  32:Src/logic_main.c ****     SystemClock_Config();
  33:Src/logic_main.c **** 
ARM GAS  /tmp/ccuU1f3i.s 			page 2


  34:Src/logic_main.c ****     MX_GPIO_Init();
  35:Src/logic_main.c ****     MX_USART2_UART_Init();
  36:Src/logic_main.c **** 
  37:Src/logic_main.c ****     HAL_NVIC_SetPriority(USART2_IRQn, 0, 0);
  38:Src/logic_main.c ****     HAL_NVIC_EnableIRQ(USART2_IRQn);
  39:Src/logic_main.c **** 
  40:Src/logic_main.c ****     srand(time(NULL));
  41:Src/logic_main.c **** 
  42:Src/logic_main.c **** 
  43:Src/logic_main.c ****     while (1) {
  44:Src/logic_main.c ****         receive_from_uart = readUserInput();
  45:Src/logic_main.c **** 
  46:Src/logic_main.c ****         if(receive_from_uart != -1){
  47:Src/logic_main.c **** 
  48:Src/logic_main.c ****         }
  49:Src/logic_main.c ****         HAL_UART_Transmit_IT(&huart2, (uint8_t*)test_send_message, strlen(test_send_message));
  50:Src/logic_main.c ****         HAL_Delay(1000);
  51:Src/logic_main.c ****     }
  52:Src/logic_main.c **** 
  53:Src/logic_main.c ****     return 0;
  54:Src/logic_main.c **** }
  55:Src/logic_main.c **** 
  56:Src/logic_main.c **** void blink_PC13(int pin_state){
  26              		.loc 1 56 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 0
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 08B5     		push	{r3, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 8
  34              		.cfi_offset 3, -8
  35              		.cfi_offset 14, -4
  57:Src/logic_main.c ****     HAL_GPIO_TogglePin(GPIOC, GPIO_PIN_13);
  36              		.loc 1 57 0
  37 0002 4FF40051 		mov	r1, #8192
  38 0006 0248     		ldr	r0, .L3
  39              	.LVL1:
  40 0008 FFF7FEFF 		bl	HAL_GPIO_TogglePin
  41              	.LVL2:
  58:Src/logic_main.c **** }
  42              		.loc 1 58 0
  43 000c 08BD     		pop	{r3, pc}
  44              	.L4:
  45 000e 00BF     		.align	2
  46              	.L3:
  47 0010 00100140 		.word	1073811456
  48              		.cfi_endproc
  49              	.LFE67:
  51              		.section	.text.readUserInput,"ax",%progbits
  52              		.align	1
  53              		.global	readUserInput
  54              		.syntax unified
  55              		.thumb
  56              		.thumb_func
  57              		.fpu softvfp
  59              	readUserInput:
ARM GAS  /tmp/ccuU1f3i.s 			page 3


  60              	.LFB68:
  59:Src/logic_main.c **** 
  60:Src/logic_main.c **** int readUserInput(void) {
  61              		.loc 1 60 0
  62              		.cfi_startproc
  63              		@ args = 0, pretend = 0, frame = 0
  64              		@ frame_needed = 0, uses_anonymous_args = 0
  65              	.LVL3:
  61:Src/logic_main.c ****     int retVal = -1;
  62:Src/logic_main.c **** 
  63:Src/logic_main.c ****     if(UartReady == 1) {
  66              		.loc 1 63 0
  67 0000 0A4B     		ldr	r3, .L12
  68 0002 1B68     		ldr	r3, [r3]
  69 0004 012B     		cmp	r3, #1
  70 0006 0DD1     		bne	.L7
  60:Src/logic_main.c ****     int retVal = -1;
  71              		.loc 1 60 0
  72 0008 10B5     		push	{r4, lr}
  73              	.LCFI1:
  74              		.cfi_def_cfa_offset 8
  75              		.cfi_offset 4, -8
  76              		.cfi_offset 14, -4
  64:Src/logic_main.c ****         UartReady = 0;
  77              		.loc 1 64 0
  78 000a 084B     		ldr	r3, .L12
  79 000c 0022     		movs	r2, #0
  80 000e 1A60     		str	r2, [r3]
  65:Src/logic_main.c ****         HAL_UART_Receive_IT(&huart2, (uint8_t*)readBuf, 1);
  81              		.loc 1 65 0
  82 0010 074C     		ldr	r4, .L12+4
  83 0012 0122     		movs	r2, #1
  84 0014 2146     		mov	r1, r4
  85 0016 0748     		ldr	r0, .L12+8
  86 0018 FFF7FEFF 		bl	HAL_UART_Receive_IT
  87              	.LVL4:
  66:Src/logic_main.c ****         retVal = atoi(readBuf);
  88              		.loc 1 66 0
  89 001c 2046     		mov	r0, r4
  90 001e FFF7FEFF 		bl	atoi
  91              	.LVL5:
  67:Src/logic_main.c ****     }
  68:Src/logic_main.c **** 
  69:Src/logic_main.c ****     return retVal;
  70:Src/logic_main.c **** }
  92              		.loc 1 70 0
  93 0022 10BD     		pop	{r4, pc}
  94              	.LVL6:
  95              	.L7:
  96              	.LCFI2:
  97              		.cfi_def_cfa_offset 0
  98              		.cfi_restore 4
  99              		.cfi_restore 14
  61:Src/logic_main.c **** 
 100              		.loc 1 61 0
 101 0024 4FF0FF30 		mov	r0, #-1
 102              		.loc 1 70 0
ARM GAS  /tmp/ccuU1f3i.s 			page 4


 103 0028 7047     		bx	lr
 104              	.L13:
 105 002a 00BF     		.align	2
 106              	.L12:
 107 002c 00000000 		.word	.LANCHOR0
 108 0030 00000000 		.word	readBuf
 109 0034 00000000 		.word	huart2
 110              		.cfi_endproc
 111              	.LFE68:
 113              		.section	.text.main,"ax",%progbits
 114              		.align	1
 115              		.global	main
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 119              		.fpu softvfp
 121              	main:
 122              	.LFB66:
  29:Src/logic_main.c ****     HAL_Init();
 123              		.loc 1 29 0
 124              		.cfi_startproc
 125              		@ Volatile: function does not return.
 126              		@ args = 0, pretend = 0, frame = 0
 127              		@ frame_needed = 0, uses_anonymous_args = 0
 128 0000 08B5     		push	{r3, lr}
 129              	.LCFI3:
 130              		.cfi_def_cfa_offset 8
 131              		.cfi_offset 3, -8
 132              		.cfi_offset 14, -4
  30:Src/logic_main.c **** 
 133              		.loc 1 30 0
 134 0002 FFF7FEFF 		bl	HAL_Init
 135              	.LVL7:
  32:Src/logic_main.c **** 
 136              		.loc 1 32 0
 137 0006 FFF7FEFF 		bl	SystemClock_Config
 138              	.LVL8:
  34:Src/logic_main.c ****     MX_USART2_UART_Init();
 139              		.loc 1 34 0
 140 000a FFF7FEFF 		bl	MX_GPIO_Init
 141              	.LVL9:
  35:Src/logic_main.c **** 
 142              		.loc 1 35 0
 143 000e FFF7FEFF 		bl	MX_USART2_UART_Init
 144              	.LVL10:
  37:Src/logic_main.c ****     HAL_NVIC_EnableIRQ(USART2_IRQn);
 145              		.loc 1 37 0
 146 0012 0022     		movs	r2, #0
 147 0014 1146     		mov	r1, r2
 148 0016 2620     		movs	r0, #38
 149 0018 FFF7FEFF 		bl	HAL_NVIC_SetPriority
 150              	.LVL11:
  38:Src/logic_main.c **** 
 151              		.loc 1 38 0
 152 001c 2620     		movs	r0, #38
 153 001e FFF7FEFF 		bl	HAL_NVIC_EnableIRQ
 154              	.LVL12:
ARM GAS  /tmp/ccuU1f3i.s 			page 5


  40:Src/logic_main.c **** 
 155              		.loc 1 40 0
 156 0022 0020     		movs	r0, #0
 157 0024 FFF7FEFF 		bl	time
 158              	.LVL13:
 159 0028 FFF7FEFF 		bl	srand
 160              	.LVL14:
 161              	.L15:
  44:Src/logic_main.c **** 
 162              		.loc 1 44 0
 163 002c FFF7FEFF 		bl	readUserInput
 164              	.LVL15:
 165 0030 074B     		ldr	r3, .L17
 166 0032 1860     		str	r0, [r3]
  49:Src/logic_main.c ****         HAL_Delay(1000);
 167              		.loc 1 49 0
 168 0034 074C     		ldr	r4, .L17+4
 169 0036 2046     		mov	r0, r4
 170 0038 FFF7FEFF 		bl	strlen
 171              	.LVL16:
 172 003c 82B2     		uxth	r2, r0
 173 003e 2146     		mov	r1, r4
 174 0040 0548     		ldr	r0, .L17+8
 175 0042 FFF7FEFF 		bl	HAL_UART_Transmit_IT
 176              	.LVL17:
  50:Src/logic_main.c ****     }
 177              		.loc 1 50 0
 178 0046 4FF47A70 		mov	r0, #1000
 179 004a FFF7FEFF 		bl	HAL_Delay
 180              	.LVL18:
 181 004e EDE7     		b	.L15
 182              	.L18:
 183              		.align	2
 184              	.L17:
 185 0050 00000000 		.word	.LANCHOR1
 186 0054 00000000 		.word	.LANCHOR2
 187 0058 00000000 		.word	huart2
 188              		.cfi_endproc
 189              	.LFE66:
 191              		.section	.text.HAL_UART_RxCpltCallback,"ax",%progbits
 192              		.align	1
 193              		.global	HAL_UART_RxCpltCallback
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 197              		.fpu softvfp
 199              	HAL_UART_RxCpltCallback:
 200              	.LFB69:
  71:Src/logic_main.c **** 
  72:Src/logic_main.c **** void HAL_UART_RxCpltCallback(UART_HandleTypeDef *UartHandle) {
 201              		.loc 1 72 0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205              	.LVL19:
 206 0000 08B5     		push	{r3, lr}
 207              	.LCFI4:
ARM GAS  /tmp/ccuU1f3i.s 			page 6


 208              		.cfi_def_cfa_offset 8
 209              		.cfi_offset 3, -8
 210              		.cfi_offset 14, -4
  73:Src/logic_main.c ****     /* Set transmission flag: transfer complete*/
  74:Src/logic_main.c ****     UartReady = 1;
 211              		.loc 1 74 0
 212 0002 034B     		ldr	r3, .L21
 213 0004 0122     		movs	r2, #1
 214 0006 1A60     		str	r2, [r3]
  75:Src/logic_main.c ****     blink_PC13(0);
 215              		.loc 1 75 0
 216 0008 0020     		movs	r0, #0
 217              	.LVL20:
 218 000a FFF7FEFF 		bl	blink_PC13
 219              	.LVL21:
  76:Src/logic_main.c **** }
 220              		.loc 1 76 0
 221 000e 08BD     		pop	{r3, pc}
 222              	.L22:
 223              		.align	2
 224              	.L21:
 225 0010 00000000 		.word	.LANCHOR0
 226              		.cfi_endproc
 227              	.LFE69:
 229              		.section	.text.get_random_number,"ax",%progbits
 230              		.align	1
 231              		.global	get_random_number
 232              		.syntax unified
 233              		.thumb
 234              		.thumb_func
 235              		.fpu softvfp
 237              	get_random_number:
 238              	.LFB70:
  77:Src/logic_main.c **** 
  78:Src/logic_main.c **** int get_random_number(int MAX_INT){
 239              		.loc 1 78 0
 240              		.cfi_startproc
 241              		@ args = 0, pretend = 0, frame = 0
 242              		@ frame_needed = 0, uses_anonymous_args = 0
 243              	.LVL22:
 244 0000 10B5     		push	{r4, lr}
 245              	.LCFI5:
 246              		.cfi_def_cfa_offset 8
 247              		.cfi_offset 4, -8
 248              		.cfi_offset 14, -4
 249 0002 0446     		mov	r4, r0
  79:Src/logic_main.c ****     return random() % MAX_INT;
 250              		.loc 1 79 0
 251 0004 FFF7FEFF 		bl	random
 252              	.LVL23:
 253 0008 90FBF4F3 		sdiv	r3, r0, r4
  80:Src/logic_main.c **** }
 254              		.loc 1 80 0
 255 000c 04FB1300 		mls	r0, r4, r3, r0
 256 0010 10BD     		pop	{r4, pc}
 257              		.cfi_endproc
 258              	.LFE70:
ARM GAS  /tmp/ccuU1f3i.s 			page 7


 260              		.global	receive_from_uart
 261              		.comm	readBuf,1,4
 262              		.comm	test_receive_message,1,4
 263              		.global	test_send_message
 264              		.global	opt
 265              		.global	UartReady
 266              		.section	.bss.UartReady,"aw",%nobits
 267              		.align	2
 268              		.set	.LANCHOR0,. + 0
 271              	UartReady:
 272 0000 00000000 		.space	4
 273              		.section	.data.opt,"aw",%progbits
 276              	opt:
 277 0000 FF       		.byte	-1
 278              		.section	.data.receive_from_uart,"aw",%progbits
 279              		.align	2
 280              		.set	.LANCHOR1,. + 0
 283              	receive_from_uart:
 284 0000 FFFFFFFF 		.word	-1
 285              		.section	.data.test_send_message,"aw",%progbits
 286              		.align	2
 287              		.set	.LANCHOR2,. + 0
 290              	test_send_message:
 291 0000 30       		.ascii	"0"
 292              		.text
 293              	.Letext0:
 294              		.file 2 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/machine/_default_types.h"
 295              		.file 3 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/sys/lock.h"
 296              		.file 4 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/sys/_types.h"
 297              		.file 5 "/home/logic/STM32Toolchain/gcc-arm/lib/gcc/arm-none-eabi/7.3.1/include/stddef.h"
 298              		.file 6 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/sys/reent.h"
 299              		.file 7 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/stdlib.h"
 300              		.file 8 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/sys/_stdint.h"
 301              		.file 9 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/time.h"
 302              		.file 10 "Drivers/CMSIS/Include/core_cm3.h"
 303              		.file 11 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/system_stm32f1xx.h"
 304              		.file 12 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xb.h"
 305              		.file 13 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 306              		.file 14 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 307              		.file 15 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_uart.h"
 308              		.file 16 "Inc/usart.h"
 309              		.file 17 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_gpio.h"
 310              		.file 18 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal.h"
 311              		.file 19 "Inc/gpio.h"
 312              		.file 20 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_cortex.h"
 313              		.file 21 "/home/logic/STM32Toolchain/gcc-arm/arm-none-eabi/include/string.h"
ARM GAS  /tmp/ccuU1f3i.s 			page 8


DEFINED SYMBOLS
                            *ABS*:0000000000000000 logic_main.c
     /tmp/ccuU1f3i.s:16     .text.blink_PC13:0000000000000000 $t
     /tmp/ccuU1f3i.s:23     .text.blink_PC13:0000000000000000 blink_PC13
     /tmp/ccuU1f3i.s:47     .text.blink_PC13:0000000000000010 $d
     /tmp/ccuU1f3i.s:52     .text.readUserInput:0000000000000000 $t
     /tmp/ccuU1f3i.s:59     .text.readUserInput:0000000000000000 readUserInput
     /tmp/ccuU1f3i.s:107    .text.readUserInput:000000000000002c $d
                            *COM*:0000000000000001 readBuf
     /tmp/ccuU1f3i.s:114    .text.main:0000000000000000 $t
     /tmp/ccuU1f3i.s:121    .text.main:0000000000000000 main
     /tmp/ccuU1f3i.s:185    .text.main:0000000000000050 $d
     /tmp/ccuU1f3i.s:192    .text.HAL_UART_RxCpltCallback:0000000000000000 $t
     /tmp/ccuU1f3i.s:199    .text.HAL_UART_RxCpltCallback:0000000000000000 HAL_UART_RxCpltCallback
     /tmp/ccuU1f3i.s:225    .text.HAL_UART_RxCpltCallback:0000000000000010 $d
     /tmp/ccuU1f3i.s:230    .text.get_random_number:0000000000000000 $t
     /tmp/ccuU1f3i.s:237    .text.get_random_number:0000000000000000 get_random_number
     /tmp/ccuU1f3i.s:283    .data.receive_from_uart:0000000000000000 receive_from_uart
                            *COM*:0000000000000001 test_receive_message
     /tmp/ccuU1f3i.s:290    .data.test_send_message:0000000000000000 test_send_message
     /tmp/ccuU1f3i.s:276    .data.opt:0000000000000000 opt
     /tmp/ccuU1f3i.s:271    .bss.UartReady:0000000000000000 UartReady
     /tmp/ccuU1f3i.s:267    .bss.UartReady:0000000000000000 $d
     /tmp/ccuU1f3i.s:279    .data.receive_from_uart:0000000000000000 $d
     /tmp/ccuU1f3i.s:286    .data.test_send_message:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_TogglePin
HAL_UART_Receive_IT
atoi
huart2
HAL_Init
SystemClock_Config
MX_GPIO_Init
MX_USART2_UART_Init
HAL_NVIC_SetPriority
HAL_NVIC_EnableIRQ
time
srand
strlen
HAL_UART_Transmit_IT
HAL_Delay
random
